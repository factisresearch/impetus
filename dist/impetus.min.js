!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});document.createElement("div").addEventListener("test",null,t)}catch(e){}return o=function(){return e},e}function i(){return o()?{passive:!0}:void 0}function u(){return!!o()&&{passive:!1}}var r=.04,s=.11;window.addEventListener("touchmove",function(){},i());var c=function e(t){function o(){document.removeEventListener("touchmove",m,u()),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",l),document.removeEventListener("mousemove",m,u()),document.removeEventListener("mouseup",h)}function c(){o(),document.addEventListener("touchmove",m,u()),document.addEventListener("touchend",h),document.addEventListener("touchcancel",l),document.addEventListener("mousemove",m,u()),document.addEventListener("mouseup",h)}function a(){T.call(g,J,K)}function f(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function v(e){var t=f(e);W||Z||(W=!0,$=!1,O=t.id,j=z=t.x,k=C=t.y,_=[],p(j,k),c())}function m(e){e.preventDefault();var t=f(e);W&&t.id===O&&(z=t.x,C=t.y,p(j,k),E())}function h(e){var t=f(e);W&&t.id===O&&l()}function l(){W=!1,p(j,k),L(),o()}function p(e,t){for(var n=Date.now();_.length>0&&!(n-_[0].time<=100);)_.shift();_.push({x:e,y:t,time:n})}function y(){var e=z-j,t=C-k;if(J+=e*q,K+=t*q,S){var n=w();0!==n.x&&(J-=e*x(n.x)*q),0!==n.y&&(K-=t*x(n.y)*q)}else w(!0);a(),j=z,k=C,Q=!1}function x(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function E(){Q||d(y),Q=!0}function w(e){var t=0,n=0;return void 0!==D&&J<D?t=D-J:void 0!==R&&J>R&&(t=R-J),void 0!==U&&K<U?n=U-K:void 0!==V&&K>V&&(n=V-K),e&&(0!==t&&(J=t>0?D:R),0!==n&&(K=n>0?U:V)),{x:t,y:n,inBounds:0===t&&0===n}}function L(){var e=_[0],t=_[_.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/q;G=n/u||0,H=o/u||0;var r=w();(Math.abs(G)>1||Math.abs(H)>1||!r.inBounds)&&($=!0,d(b))}function b(){if($){G*=Y,H*=Y,J+=G,K+=H;var e=w();if(Math.abs(G)>N||Math.abs(H)>N||!e.inBounds){if(S){if(0!==e.x)if(e.x*G<=0)G+=e.x*r;else{var t=e.x>0?2.5:-2.5;G=(e.x+t)*s}if(0!==e.y)if(e.y*H<=0)H+=e.y*r;else{var t=e.y>0?2.5:-2.5;H=(e.y+t)*s}}else 0!==e.x&&(J=e.x>0?D:R,G=0),0!==e.y&&(K=e.y>0?U:V,H=0);a(),d(b)}else $=!1}}var M=t.source,g=void 0===M?document:M,T=t.update,B=t.multiplier,q=void 0===B?1:B,X=t.friction,Y=void 0===X?.92:X,A=t.initialValues,F=t.boundX,I=t.boundY,P=t.bounce,S=void 0===P||P;n(this,e);var D,R,U,V,j,k,z,C,O,G,H,J=0,K=0,N=Math.abs(.3*q),Q=!1,W=!1,Z=!1,$=!1,_=[];!function(){if(!(g="string"==typeof g?document.querySelector(g):g))throw new Error("IMPETUS: source not found.");if(!T)throw new Error("IMPETUS: update function not defined.");A&&(A[0]&&(J=A[0]),A[1]&&(K=A[1]),a()),F&&(D=F[0],R=F[1]),I&&(U=I[0],V=I[1]),g.addEventListener("touchstart",v,i()),g.addEventListener("mousedown",v,i())}(),this.destroy=function(){return g.removeEventListener("touchstart",v),g.removeEventListener("mousedown",v),o(),null},this.pause=function(){o(),W=!1,Z=!0},this.resume=function(){Z=!1},this.setValues=function(e,t){"number"==typeof e&&(J=e),"number"==typeof t&&(K=t)},this.setMultiplier=function(e){q=e,N=Math.abs(.3*q)},this.setBoundX=function(e){D=e[0],R=e[1]},this.setBoundY=function(e){U=e[0],V=e[1]}};t.exports=c;var d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});